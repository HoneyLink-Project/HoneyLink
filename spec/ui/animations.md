# docs/ui/animations.md

**バッジ:** `🚫 実装コード非出力` `🚫 C/C++依存禁止`

> HoneyLink™ UI のモーション規範を定義します。実装コードや C/C++ 依存フレームワークは記述しません。数値は仕様として提示します。

## 目次
- [モーション原則](#モーション原則)
- [アニメーションタイムライン](#アニメーションタイムライン)
- [コンポーネント別ガイド](#コンポーネント別ガイド)
- [イージングカーブ標準](#イージングカーブ標準)
- [Reduced Motion 対応](#reduced-motion-対応)
- [性能と最適化](#性能と最適化)
- [観測とテスト](#観測とテスト)
- [受け入れ基準 (DoD)](#受け入れ基準-dod)

## モーション原則
1. **意図強調:** 変化の理由が明確であること。CTA と状態変化をモーションで伝える。
2. **時間的整合:** 主要アニメーションは 120ms〜320ms に収め、連鎖時は 60ms のオーバーラップ。
3. **自然さ:** イーズアウト主体、開始は急すぎず完了は滑らか。
4. **アクセス制御:** 疲労や眩暈を誘発しないよう、過度な動きや点滅を禁止。

## アニメーションタイムライン
| 状況 | 持続時間 | 例 |
|------|----------|----|
| ページ遷移 | 280ms | ダッシュボード → 詳細 |
| モーダル表示 | 200ms | ペアリング詳細 |
| トースト通知 | 160ms | 成功/失敗トースト |
| カードホバー | 120ms | デバイスカード |
| ローディングスピナー | 800ms (繰返) | 通信中表示 |

## コンポーネント別ガイド
| コンポーネント | アクション | 挙動 |
|----------------|-----------|------|
| Primaryボタン | Hover | 背景を `color.primary-dark` に 120ms イーズアウト |
| モーダル | オープン | 20px 下から 200ms でフェード + スライド |
| タブ切替 | タブ移動 | 下線スライド 160ms、コンテンツクロスフェード 120ms |
| チャート | データ更新 | 1秒ごとに平滑補間、バースト時は 320ms のフェードイン |
| アラートバナー | 表示 | トップからドロップ 180ms、閉じる 140ms |

## イージングカーブ標準
- **標準:** `cubic-bezier(0.25, 0.1, 0.25, 1)` (Ease)
- **強調:** `cubic-bezier(0.4, 0, 0.2, 1)` (Ease-in-out)
- **エントランス:** `cubic-bezier(0.33, 1, 0.68, 1)` (Ease-out)
- **Reduced Motion:** 線形または 0ms で置換
- 実装時はフレームワーク標準のイージング API を利用し、C/C++ レンダリングエンジンを要求しない。

## Reduced Motion 対応
- OS 設定 (prefers-reduced-motion 相当) を尊重。オプトアウト時は:
  - フェード 60ms
  - スライド距離 8px → 0px
  - ループアニメーションは静的アイコンへ切替
- UI からも「アニメーション軽減」トグルを提供し、設定を同期。
- 詳細要件は[docs/ui/accessibility.md](./accessibility.md)参照。

## 性能と最適化
- すべてのアニメーションは GPU 加速想定 (CSS transform/opacity 等)。
- 1 秒間に 3 つを超える大規模アニメーションを同時発生させない。
- モーションが QoS 表示を阻害しないよう優先度を設計。
- 測定指標: FPS 55 以上、CPU 使用率 20% 以下 (ブラウザ計測)。

## 観測とテスト
- [docs/testing/e2e-tests.md](../testing/e2e-tests.md)で UX テストシナリオを定義し、アニメーションの有無で操作時間を比較。
- 可観測性: Telemetry で「アニメーション減設定の利用率」「モーション失敗イベント」を計測。

## 受け入れ基準 (DoD)
- 主要コンポーネントのアニメーション仕様 (時間、距離、イージング) が表形式で定義されている。
- Reduced Motion 戦略がアクセシビリティ文書と矛盾しない。
- パフォーマンス指標が定量化され、Testing 文書とリンク済み。
- 実装依存・C/C++依存記述が存在しない。
- すべてのアニメーションが UI/UX 原則と整合している。
